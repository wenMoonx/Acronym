{"version":3,"sources":["../../src/graphql/resolvers.ts"],"sourcesContent":["import { isEmpty } from '@/utils/util';\nimport { HttpException } from '@exceptions/HttpException';\nimport { Acronym, AcronymGroup } from '@interfaces/acronym.interface';\nimport acronymModel from '@models/acronym.model';\n\nconst resolvers = {\n  readAcronym: async ({ from, limit, search }: any): Promise<AcronymGroup> => {\n    const findAcronyms: Acronym[] = await acronymModel\n      .find({\n        description: { $regex: search },\n      })\n      .skip(from)\n      .limit(limit);\n    return {\n      isOnly: true,\n      acronyms: findAcronyms,\n    };\n  },\n\n  createAcronym: async ({ acronym, description }: any) => {\n    if (isEmpty(acronym) || isEmpty(description)) throw new HttpException(400, 'AcronymData is empty');\n\n    const findAcronym: Acronym = await acronymModel.findOne({ acronym: acronym });\n    if (!isEmpty(findAcronym)) throw new HttpException(409, `This WTF:${acronym} already exists`);\n    await acronymModel.create({\n      acronym: acronym,\n      description: description,\n    });\n\n    return true;\n  },\n\n  updateAcronym: async ({ nowAcronym, newAcronym, newDescription }: any) => {\n    if (isEmpty(newAcronym) || isEmpty(newDescription)) throw new HttpException(400, 'acronymData is empty');\n\n    const findNowAcronym: Acronym = await acronymModel.findOne({ acronym: nowAcronym });\n    if (isEmpty(findNowAcronym)) throw new HttpException(409, 'Acronym does not exist');\n    const findAcronym: Acronym = await acronymModel.findOne({ acronym: newAcronym });\n    if (findAcronym && findAcronym.acronym != nowAcronym) throw new HttpException(409, `This WTF:${newAcronym} already exists`);\n\n    await acronymModel.updateOne({ acronym: nowAcronym }, { acronym: newAcronym, description: newDescription });\n\n    return true;\n  },\n\n  deleteAcronym: async ({ deleteAcronym }: any) => {\n    const findAcronym: Acronym = await acronymModel.findOne({ acronym: deleteAcronym });\n    if (isEmpty(findAcronym)) throw new HttpException(409, \"Acronym doesn't exist\");\n\n    await acronymModel.deleteOne({ acronym: deleteAcronym });\n    return true;\n  },\n};\n\nexport default resolvers;\n"],"names":["resolvers","readAcronym","from","limit","search","findAcronyms","acronymModel","find","description","$regex","skip","isOnly","acronyms","createAcronym","acronym","isEmpty","HttpException","findAcronym","findOne","create","updateAcronym","nowAcronym","newAcronym","newDescription","findNowAcronym","updateOne","deleteAcronym","deleteOne"],"mappings":"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"}